System.register([],function(E){"use strict";return{execute:function(){E("atom",N);let L=0;function N(r,u){const h=`atom${++L}`,v={toString:()=>h};return typeof r=="function"?v.read=r:(v.init=r,v.read=R,v.write=T),u&&(v.write=u),v}function R(r){return r(this)}function T(r,u,h){return u(this,typeof h=="function"?h(r(this)):h)}const M=(r,u)=>r.unstable_is?r.unstable_is(u):u===r,D=r=>"init"in r,O=r=>!!r.write,S=new WeakMap,U=(r,u)=>{S.set(r,u),r.catch(()=>{}).finally(()=>S.delete(r))},_=(r,u)=>{const h=S.get(r);h&&(S.delete(r),h(u))},C=(r,u)=>{r.status="fulfilled",r.value=u},q=(r,u)=>{r.status="rejected",r.reason=u},V=r=>typeof(r==null?void 0:r.then)=="function",y=(r,u)=>!!r&&"v"in r&&"v"in u&&Object.is(r.v,u.v),B=(r,u)=>!!r&&"e"in r&&"e"in u&&Object.is(r.e,u.e),w=r=>!!r&&"v"in r&&r.v instanceof Promise,$=(r,u)=>"v"in r&&"v"in u&&r.v.orig&&r.v.orig===u.v.orig,p=r=>{if("e"in r)throw r.e;return r.v},x=E("createStore",()=>{const r=new WeakMap,u=new WeakMap,h=new Map,v=t=>r.get(t),F=(t,e)=>{const o=v(t);if(r.set(t,e),h.has(t)||h.set(t,o),w(o)){const s="v"in e?e.v instanceof Promise?e.v:Promise.resolve(e.v):Promise.reject(e.e);o.v!==s&&_(o.v,s)}},G=(t,e,o,s)=>{const c=new Map(s?e.d:null);let a=!1;o.forEach((n,i)=>{!n&&M(t,i)&&(n=e),n&&(c.set(i,n),e.d.get(i)!==n&&(a=!0))}),(a||e.d.size!==c.size)&&(e.d=c)},A=(t,e,o,s)=>{const c=v(t),a={d:(c==null?void 0:c.d)||new Map,v:e};if(o&&G(t,a,o,s),y(c,a)&&c.d===a.d)return c;if(w(c)&&w(a)&&$(c,a)){if(c.d===a.d)return c;a.v=c.v}return F(t,a),a},H=(t,e,o,s)=>{if(V(e)){let c;const a=()=>{const i=v(t);if(!w(i)||i.v!==n)return;const d=A(t,n,o);u.has(t)&&i.d!==d.d&&J(t,d,i.d)},n=new Promise((i,d)=>{let l=!1;e.then(f=>{l||(l=!0,C(n,f),i(f),a())},f=>{l||(l=!0,q(n,f),d(f),a())}),c=f=>{l||(l=!0,f.then(g=>C(n,g),g=>q(n,g)),i(f))}});return n.orig=e,n.status="pending",U(n,i=>{i&&c(i),s==null||s()}),A(t,n,o,!0)}return A(t,e,o)},K=(t,e,o)=>{const s=v(t),c={d:(s==null?void 0:s.d)||new Map,e};return o&&G(t,c,o),B(s,c)&&s.d===c.d?s:(F(t,c),c)},m=(t,e)=>{const o=v(t);if(!e&&o&&(u.has(t)||Array.from(o.d).every(([l,f])=>{if(l===t)return!0;const g=m(l);return g===f||y(g,f)})))return o;const s=new Map;let c=!0;const a=l=>{if(M(t,l)){const g=v(l);if(g)return s.set(l,g),p(g);if(D(l))return s.set(l,void 0),l.init;throw new Error("no atom init")}const f=m(l);return s.set(l,f),p(f)};let n,i;const d={get signal(){return n||(n=new AbortController),n.signal},get setSelf(){return!i&&O(t)&&(i=(...l)=>{if(!c)return k(t,...l)}),i}};try{const l=t.read(a,d);return H(t,l,s,()=>n==null?void 0:n.abort())}catch(l){return K(t,l,s)}finally{c=!1}},Q=t=>p(m(t)),X=t=>{let e=u.get(t);return e||(e=z(t)),e},Y=t=>{const e=u.get(t);e&&P(t,e)&&j(t)},Z=t=>{const e=n=>{var i;const d=new Set((i=u.get(n))==null?void 0:i.t);return h.forEach((l,f)=>{var g;(g=v(f))!=null&&g.d.has(n)&&d.add(f)}),d},o=new Array,s=new Set,c=n=>{if(!s.has(n)){s.add(n);for(const i of e(n))n!==i&&c(i);o.push(n)}};c(t);const a=new Set([t]);for(let n=o.length-1;n>=0;--n){const i=o[n],d=v(i);if(!d)continue;let l=!1;for(const f of d.d.keys())if(f!==i&&a.has(f)){l=!0;break}if(l){const f=m(i,!0);y(d,f)||a.add(i)}}},I=(t,...e)=>{let o=!0;const s=n=>p(m(n)),c=(n,...i)=>{let d;if(M(t,n)){if(!D(n))throw new Error("atom not writable");const l=v(n),f=H(n,i[0]);y(l,f)||Z(n)}else d=I(n,...i);return o||W(),d},a=t.write(s,c,...e);return o=!1,a},k=(t,...e)=>{const o=I(t,...e);return W(),o},z=(t,e,o)=>{var s;const c=o||[];(s=v(t))==null||s.d.forEach((n,i)=>{const d=u.get(i);d?d.t.add(t):i!==t&&z(i,t,c)}),m(t);const a={t:new Set(e&&[e]),l:new Set};if(u.set(t,a),O(t)&&t.onMount){const{onMount:n}=t;c.push(()=>{const i=n((...d)=>k(t,...d));i&&(a.u=i)})}return o||c.forEach(n=>n()),a},P=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),j=t=>{var e;const o=(e=u.get(t))==null?void 0:e.u;o&&o(),u.delete(t);const s=v(t);s&&(w(s)&&_(s.v),s.d.forEach((c,a)=>{if(a!==t){const n=u.get(a);n&&(n.t.delete(t),P(a,n)&&j(a))}}))},J=(t,e,o)=>{const s=new Set(e.d.keys()),c=new Set;o==null||o.forEach((a,n)=>{if(s.has(n)){s.delete(n);return}c.add(n);const i=u.get(n);i&&i.t.delete(t)}),s.forEach(a=>{const n=u.get(a);n?n.t.add(t):u.has(t)&&z(a,t)}),c.forEach(a=>{const n=u.get(a);n&&P(a,n)&&j(a)})},W=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([e,o])=>{const s=v(e);if(s){const c=u.get(e);c&&s.d!==(o==null?void 0:o.d)&&J(e,s,o==null?void 0:o.d),c&&!(!w(o)&&(y(o,s)||B(o,s)))&&c.l.forEach(a=>a())}})}};return{get:Q,set:k,sub:(t,e)=>{const o=X(t);W();const s=o.l;return s.add(e),()=>{s.delete(e),Y(t)}}}});let b;const tt=E("getDefaultStore",()=>(b||(b=x()),b))}}});
